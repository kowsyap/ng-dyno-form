import { Component, EventEmitter, Input, Output } from '@angular/core';
import { FormControl, Validators } from '@angular/forms';
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
import * as i2 from "@angular/common";
import * as i3 from "ngx-bootstrap/datepicker";
import * as i4 from "@ng-select/ng-select";
export class NgDynoFormComponent {
    constructor(fb) {
        this.fb = fb;
        this.mode = 'light';
        this.callBack = new EventEmitter();
        this.passwordVisibility = {};
        this.selectList = {};
        this.nonFormTypes = ['button', 'heading'];
        this.hasCtrl = (ctrl) => this.allKeys.includes(ctrl);
        this.hasAllKeys = (arr) => arr.every(elem => this.allKeys.includes(elem));
        this.filterConfig = (key, val, bool) => this.config.filter((ele) => val ? ele[key] === val : (bool ? ele[key] : !ele[key]));
        this.getTypeKeys = (type, value, bool) => (this.filterConfig(type, value, bool)).map((ele) => ele['name']);
        this.getTypeValues = (type, value, bool) => this.getTypeKeys(type, value, bool).reduce((acc, key) => (this.rawValues.hasOwnProperty(key) ? { ...acc, [key]: this.rawValues[key] } : acc), {});
        this.dynamicForm = this.fb.group({});
    }
    ngOnInit() {
        this.buildForm();
    }
    ngOnChanges(changes) {
        if (changes['config']) {
            this.buildForm();
        }
    }
    buildForm() {
        this.dynamicForm = this.fb.group({});
        if (this.config && this.config?.length) {
            this.config.forEach((field) => {
                if (field.name && !this.nonFormTypes.includes(field.type)) {
                    let validators = [];
                    field.required ? validators.push(Validators.required) : null;
                    field.pattern ? validators.push(Validators.pattern(field.pattern)) : null;
                    this.dynamicForm.addControl(field.name, new FormControl({ value: field.value || null, disabled: field.disable || false }, validators));
                    if (field.type === 'file')
                        this.dynamicForm.addControl(field.name + '_name', new FormControl(field?.extra?.fileName || null));
                    if (field.type === 'password')
                        this.passwordVisibility[field.name] = false;
                    if (field.type === 'select')
                        this.selectList[field.name] = field?.extra?.options || [];
                }
            });
        }
    }
    get controls() { return this.dynamicForm.controls; }
    get allKeys() { return Object.keys(this.dynamicForm.getRawValue()); }
    get rawValues() { return this.dynamicForm.getRawValue(); }
    get formValues() { return this.dynamicForm.value; }
    addValidation(validation, ...ctrls) {
        ctrls.forEach((ctrl) => {
            if (this.hasCtrl(ctrl)) {
                this.dynamicForm.get(ctrl)?.addValidators(validation);
                this.dynamicForm.get(ctrl)?.updateValueAndValidity();
            }
        });
    }
    clearValidation(...ctrls) {
        ctrls.forEach((ctrl) => {
            if (this.hasCtrl(ctrl)) {
                this.dynamicForm.get(ctrl)?.clearValidators();
                this.dynamicForm.get(ctrl)?.updateValueAndValidity();
            }
        });
    }
    setValue(ctrl, value) {
        if (this.hasCtrl(ctrl)) {
            this.dynamicForm.get(ctrl)?.setValue(value);
            this.dynamicForm.get(ctrl)?.updateValueAndValidity();
        }
    }
    patchValue(obj) {
        if (obj && this.hasAllKeys(Object.keys(obj))) {
            this.dynamicForm.patchValue(obj);
        }
    }
    resetValue(...ctrls) {
        if (ctrls === 'all')
            this.dynamicForm.reset();
        else {
            ctrls.forEach((ctrl) => {
                if (this.hasCtrl(ctrl))
                    this.setValue(ctrl, null);
            });
        }
    }
    disableField(...ctrls) {
        if (ctrls === 'all')
            ctrls = Object.keys(this.dynamicForm.getRawValue());
        ctrls.forEach((ctrl) => {
            if (this.hasCtrl(ctrl)) {
                this.dynamicForm.get(ctrl)?.disable();
            }
        });
    }
    enableField(...ctrls) {
        if (ctrls === 'all')
            ctrls = Object.keys(this.dynamicForm.getRawValue());
        ctrls.forEach((ctrl) => {
            if (this.hasCtrl(ctrl)) {
                this.dynamicForm.get(ctrl)?.enable();
            }
        });
    }
    sectionValidator(section) {
        if (section || section === '') {
            let ctrls = this.filterConfig('section', section ? section : undefined, false).map((e) => e.name);
            ctrls?.forEach((ctrl) => {
                this.dynamicForm.get(ctrl)?.markAsTouched();
            });
            return ctrls?.every((ctrl) => this.dynamicForm?.get(ctrl)?.valid);
        }
        else {
            this.dynamicForm.markAllAsTouched();
            return this.dynamicForm.valid;
        }
    }
    sectionSubmit(section) {
        let valid = this.sectionValidator(section);
        return {
            valid: valid,
            values: (section || section === '') ? this.getTypeValues('section', section ? section : undefined, false) : this.rawValues
        };
    }
    formsubmit() {
        this.dynamicForm.markAllAsTouched();
        return {
            valid: this.dynamicForm.valid,
            values: this.rawValues
        };
    }
    eventCall(e, type, section, name, submit) {
        let values = null;
        if (submit) {
            values = this.sectionSubmit(section);
        }
        this.callBack.emit({
            event: submit ? values : e,
            type: type,
            section: section,
            name: name
        });
    }
    onFileSelected(event, section, name) {
        let config = this.config.find((e) => e.name === name);
        const file = event.target.files[0];
        if (file && config && (config?.extra?.format?.includes(file.type) || !config?.extra?.format)) {
            const reader = new FileReader();
            reader.onload = (e) => {
                this.setValue(name, e.target.result);
                this.setValue(name + '_name', file.name);
            };
            reader.readAsDataURL(file);
        }
        else {
            this.setValue(name, '');
            this.setValue(name + '_name', '');
            event.target.value = null;
        }
        this.eventCall(event, 'file', section, name);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.7", ngImport: i0, type: NgDynoFormComponent, deps: [{ token: i1.FormBuilder }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.7", type: NgDynoFormComponent, selector: "dyno-form", inputs: { config: "config", mainClass: "mainClass", mode: "mode" }, outputs: { callBack: "callBack" }, usesOnChanges: true, ngImport: i0, template: "<!-- Form Element -->\r\n<form [formGroup]=\"dynamicForm\" [attr.data-bs-theme]=\"mode\">\r\n    <div class=\"{{ mainClass }}\">\r\n      <!-- Loop through form fields -->\r\n      <ng-container *ngFor=\"let field of config; let i = index\">\r\n        <div *ngIf=\"!field.condition || field.condition(dynamicForm.value)\" class=\"{{ field.parentClass }} position-relative\">\r\n          <!-- Check for checkbox type -->\r\n          <ng-container *ngIf=\"field.type === 'checkbox'\">\r\n            <input\r\n              [formControlName]=\"field.name\"\r\n              type=\"checkbox\"\r\n              class=\"{{ field.class }}\"\r\n              (change)=\"eventCall($event, 'change', field?.section, field.name)\"\r\n            />\r\n          </ng-container>\r\n          <!-- Label for non-form types -->\r\n          <label *ngIf=\"!nonFormTypes.includes(field.type) && field.label\" class=\"{{ field.labelClass }}\">\r\n            {{ field.label }}\r\n            <span style=\"color: red;\" *ngIf=\"field.required\">*</span>\r\n          </label>\r\n          <!-- Input fields for text, number, email, password -->\r\n          <ng-container *ngIf=\"['text', 'number', 'email', 'password'].includes(field.type)\">\r\n            <input\r\n              [formControlName]=\"field.name\"\r\n              [type]=\"field.type === 'password' ? (passwordVisibility[field.name] ? 'text' : 'password') : field.type\"\r\n              class=\"{{ field.class }}\"\r\n              (input)=\"eventCall($event, 'input', field?.section, field.name)\"\r\n              (focus)=\"eventCall($event, 'focus', field?.section, field.name)\"\r\n              (blur)=\"eventCall($event, 'input', field?.section, field.name)\"\r\n            />\r\n            <span class=\"view-icon\" *ngIf=\"field.type === 'password'\" (click)=\"passwordVisibility[field.name] = !passwordVisibility[field.name]\"\r\n              [ngClass]=\"!passwordVisibility[field.name] ? 'eye' : 'eye-slash'\" style=\"cursor: pointer;\">\r\n              <!-- SVG icons for password visibility -->\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" *ngIf=\"!passwordVisibility[field.name]\" viewBox=\"0 0 256 256\">\r\n                <!-- Path for the eye icon -->\r\n              </svg>\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" *ngIf=\"passwordVisibility[field.name]\" viewBox=\"0 0 256 256\">\r\n                <!-- Path for the crossed eye icon -->\r\n              </svg>\r\n            </span>\r\n          </ng-container>\r\n          <!-- Textarea field -->\r\n          <ng-container *ngIf=\"field.type === 'textarea'\">\r\n            <textarea\r\n              [formControlName]=\"field.name\"\r\n              class=\"{{ field.class }}\"\r\n              rows=\"{{ field?.extra?.rows || 1 }}\"\r\n              (input)=\"eventCall($event, 'input', field?.section, field.name)\"\r\n              (focus)=\"eventCall($event, 'focus', field?.section, field.name)\"\r\n              (blur)=\"eventCall($event, 'input', field?.section, field.name)\"\r\n            ></textarea>\r\n          </ng-container>\r\n          <!-- Select dropdown -->\r\n          <ng-container *ngIf=\"field.type === 'select'\">\r\n            <!-- Dropdown component with various event listeners -->\r\n            <ng-select #select\r\n              [formControlName]=\"field.name\"\r\n              class=\"{{ field.class }}\"\r\n              [items]=\"selectList[field.name]\"\r\n              [multiple]=\"field?.extra?.multi || false\"\r\n              [bindLabel]=\"field?.extra?.label || ''\"\r\n              [bindValue]=\"field?.extra?.key || ''\"\r\n              [searchable]=\"false\"\r\n              (change)=\"eventCall($event, 'change', field?.section, field.name)\"\r\n              (close)=\"eventCall($event, 'close', field?.section, field.name)\"\r\n              (open)=\"eventCall($event, 'focus', field?.section, field.name)\"\r\n              (clear)=\"eventCall($event, 'clear', field?.section, field.name)\"\r\n              (focus)=\"eventCall($event, 'focus', field?.section, field.name)\"\r\n              (search)=\"eventCall($event, 'search', field?.section, field.name)\"\r\n              (blur)=\"eventCall($event, 'blur', field?.section, field.name)\"\r\n            >\r\n              <!-- Custom search input -->\r\n              <ng-template ng-header-tmp>\r\n                <input #check style=\"width: 100%; line-height: 24px;\" type=\"text\" name=\"type\" placeholder=\"Search Key\"\r\n                  (input)=\"select.filter(check.value)\" />\r\n              </ng-template>\r\n            </ng-select>\r\n          </ng-container>\r\n          <!-- Heading -->\r\n          <ng-container *ngIf=\"field.type === 'heading'\">\r\n            <div class=\"{{ field.class }}\" [innerHTML]=\"field.label\"></div>\r\n          </ng-container>\r\n          <!-- Radio buttons -->\r\n          <ng-container *ngIf=\"field.type === 'radio'\">\r\n            <div class=\"{{ field?.extra?.customClass }}\">\r\n              <ng-container *ngFor=\"let item of field?.extra?.options || []\">\r\n                <div class=\"{{ field.class }}\">\r\n                  <input\r\n                    [formControlName]=\"field.name\"\r\n                    type=\"radio\"\r\n                    id=\"radio-{{ i }}\"\r\n                    class=\"{{ field.class }}-input\"\r\n                    [value]=\"field?.extra?.key ? item[field.extra?.key || ''] : item\"\r\n                    (change)=\"eventCall($event, 'change', field?.section, field.name)\"\r\n                  />\r\n                  <label class=\"{{ field.class }}-label\" for=\"radio-{{ i }}\">\r\n                    {{ field?.extra?.label ? item[field.extra?.label || ''] : item }}\r\n                  </label>\r\n                </div>\r\n              </ng-container>\r\n            </div>\r\n          </ng-container>\r\n          <!-- Date input -->\r\n          <ng-container *ngIf=\"field.type === 'date'\">\r\n            <input type=\"text\"\r\n              [formControlName]=\"field.name\"\r\n              class=\"{{ field.class }}\"\r\n              [bsConfig]=\"{\r\n                dateInputFormat: field?.extra?.format || 'DD-MM-YYYY',\r\n                adaptivePosition: true,\r\n                containerClass: field?.extra?.theme || 'theme-dark-blue',\r\n                minMode: field?.extra?.mode || 'day'\r\n              }\"\r\n              [minDate]=\"field?.extra?.minDate || undefined\"\r\n              [maxDate]=\"field?.extra?.maxDate || undefined\"\r\n              (bsValueChange)=\"eventCall($event, 'date', field?.section, field.name)\"\r\n              bsDatepicker>\r\n          </ng-container>\r\n          <!-- Date range input -->\r\n          <ng-container *ngIf=\"field.type === 'daterange'\">\r\n            <input type=\"text\"\r\n              [formControlName]=\"field.name\"\r\n              class=\"{{ field.class }}\"\r\n              [bsConfig]=\"{\r\n                rangeInputFormat: field?.extra?.format || 'DD-MM-YYYY',\r\n                adaptivePosition: true,\r\n                containerClass: field?.extra?.theme || 'theme-dark-blue',\r\n                minMode: field?.extra?.mode || 'day'\r\n              }\"\r\n              [minDate]=\"field?.extra?.minDate || undefined\"\r\n              [maxDate]=\"field?.extra?.maxDate || undefined\"\r\n              (bsValueChange)=\"eventCall($event, 'date', field?.section, field.name)\"\r\n              bsDaterangepicker>\r\n          </ng-container>\r\n          <!-- File input -->\r\n          <ng-container *ngIf=\"field.type === 'file'\">\r\n            <input\r\n              [type]=\"'file'\"\r\n              id=\"fileInput-{{ i }}\"\r\n              class=\"{{ field.class }} {{ field?.extra?.customText ? 'd-none' : '' }}\"\r\n              (change)=\"onFileSelected($event, field?.section, field.name)\"\r\n              [accept]=\"field?.extra?.format\"\r\n              [disabled]=\"field.disable\">\r\n            <label\r\n              for=\"fileInput-{{ i }}\"\r\n              class=\"{{ field?.extra?.customClass }} {{ field.disable ? 'disabled' : '' }}\"\r\n              *ngIf=\"field?.extra?.customClass\">\r\n              {{ dynamicForm.get(field.name + '_name')?.value ? dynamicForm.get(field.name + '_name')?.value : (field?.extra?.customText || 'No file chosen') }}\r\n            </label>\r\n          </ng-container>\r\n          <!-- Button -->\r\n          <ng-container *ngIf=\"field.type === 'button'\">\r\n            <button class=\"{{ field.class }}\" (click)=\"eventCall($event, 'click', field?.section, field.name, field?.extra?.submit || false)\">\r\n              {{ field.label }}\r\n            </button>\r\n          </ng-container>\r\n          <!-- Validation error messages -->\r\n          <div *ngIf=\"!controls[field.name]?.valid && controls[field.name]?.touched && field?.extra?.validationMessages\"\r\n            class=\"validation-error\">\r\n            <span class=\"text-danger\" *ngIf=\"controls[field.name]?.errors?.['required']\">\r\n              {{ field?.extra?.validationMessages?.required }}\r\n            </span>\r\n            <span class=\"text-danger\" *ngIf=\"controls[field.name]?.errors?.['pattern']\">\r\n              {{ field?.extra?.validationMessages?.pattern }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </ng-container>\r\n      <ng-content></ng-content>\r\n    </div>\r\n  </form>\r\n  ", styles: [".was-validated .form-control:invalid,.form-control.is-invalid,.form-control.ng-touched.ng-invalid,.form-select.ng-touched.ng-invalid{border-color:red;padding-right:calc(1.5em + .75rem);background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}input[type=password].form-control.ng-touched.ng-invalid,input[bsDatepicker].form-control.ng-touched.ng-invalid{background-image:unset}::ng-deep .ng-select .ng-select-container{border-color:#e2e5ec;border-radius:.25rem!important}::ng-deep .ng-select .ng-select-container .ng-arrow-wrapper .ng-arrow{background-image:url(data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2212%22%20height%3D%2212%22%20viewBox%3D%220%200%2012%2012%22%3E%3Ctitle%3Edown-arrow%3C%2Ftitle%3E%3Cg%20fill%3D%22%23000000%22%3E%3Cpath%20d%3D%22M10.293%2C3.293%2C6%2C7.586%2C1.707%2C3.293A1%2C1%2C0%2C0%2C0%2C.293%2C4.707l5%2C5a1%2C1%2C0%2C0%2C0%2C1.414%2C0l5-5a1%2C1%2C0%2C1%2C0-1.414-1.414Z%22%20fill%3D%22%23000000%22%3E%3C%2Fpath%3E%3C%2Fg%3E%3C%2Fsvg%3E);background-size:cover;background-position:center;width:9px;height:9px;background-repeat:no-repeat;border:none}::ng-deep .ng-select.ng-select-opened .ng-arrow-wrapper{top:2px}::ng-deep .ng-select.ng-select-opened .ng-arrow-wrapper .ng-arrow{background-size:cover;background-position:center}::ng-deep .ng-select.ng-invalid.ng-touched .ng-select-container{border-color:red!important}.validation-error{font-size:12px}.disabled{cursor:not-allowed}.view-icon{position:absolute;bottom:0;transform:translateY(-50%);right:20px;padding-top:0;padding-bottom:0;width:20px}\n"], dependencies: [{ kind: "directive", type: i2.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i2.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i1.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { kind: "directive", type: i1.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i1.CheckboxControlValueAccessor, selector: "input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]" }, { kind: "directive", type: i1.RadioControlValueAccessor, selector: "input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]", inputs: ["name", "formControlName", "value"] }, { kind: "directive", type: i1.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i1.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i1.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "directive", type: i1.FormControlName, selector: "[formControlName]", inputs: ["formControlName", "disabled", "ngModel"], outputs: ["ngModelChange"] }, { kind: "directive", type: i3.BsDatepickerDirective, selector: "[bsDatepicker]", inputs: ["placement", "triggers", "outsideClick", "container", "outsideEsc", "isDisabled", "minDate", "maxDate", "minMode", "daysDisabled", "datesDisabled", "datesEnabled", "dateCustomClasses", "dateTooltipTexts", "isOpen", "bsValue", "bsConfig"], outputs: ["onShown", "onHidden", "bsValueChange"], exportAs: ["bsDatepicker"] }, { kind: "directive", type: i3.BsDatepickerInputDirective, selector: "input[bsDatepicker]" }, { kind: "directive", type: i3.BsDaterangepickerDirective, selector: "[bsDaterangepicker]", inputs: ["placement", "triggers", "outsideClick", "container", "outsideEsc", "isOpen", "bsValue", "bsConfig", "isDisabled", "minDate", "maxDate", "dateCustomClasses", "daysDisabled", "datesDisabled", "datesEnabled"], outputs: ["onShown", "onHidden", "bsValueChange"], exportAs: ["bsDaterangepicker"] }, { kind: "directive", type: i3.BsDaterangepickerInputDirective, selector: "input[bsDaterangepicker]" }, { kind: "component", type: i4.NgSelectComponent, selector: "ng-select", inputs: ["bindLabel", "bindValue", "markFirst", "placeholder", "notFoundText", "typeToSearchText", "addTagText", "loadingText", "clearAllText", "appearance", "dropdownPosition", "appendTo", "loading", "closeOnSelect", "hideSelected", "selectOnTab", "openOnEnter", "maxSelectedItems", "groupBy", "groupValue", "bufferAmount", "virtualScroll", "selectableGroup", "selectableGroupAsModel", "searchFn", "trackByFn", "clearOnBackspace", "labelForId", "inputAttrs", "tabIndex", "readonly", "searchWhileComposing", "minTermLength", "editableSearchTerm", "keyDownFn", "typeahead", "multiple", "addTag", "searchable", "clearable", "isOpen", "items", "compareWith", "clearSearchOnAdd", "deselectOnClick"], outputs: ["blur", "focus", "change", "open", "close", "search", "clear", "add", "remove", "scroll", "scrollToEnd"] }, { kind: "directive", type: i4.NgHeaderTemplateDirective, selector: "[ng-header-tmp]" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.7", ngImport: i0, type: NgDynoFormComponent, decorators: [{
            type: Component,
            args: [{ selector: 'dyno-form', template: "<!-- Form Element -->\r\n<form [formGroup]=\"dynamicForm\" [attr.data-bs-theme]=\"mode\">\r\n    <div class=\"{{ mainClass }}\">\r\n      <!-- Loop through form fields -->\r\n      <ng-container *ngFor=\"let field of config; let i = index\">\r\n        <div *ngIf=\"!field.condition || field.condition(dynamicForm.value)\" class=\"{{ field.parentClass }} position-relative\">\r\n          <!-- Check for checkbox type -->\r\n          <ng-container *ngIf=\"field.type === 'checkbox'\">\r\n            <input\r\n              [formControlName]=\"field.name\"\r\n              type=\"checkbox\"\r\n              class=\"{{ field.class }}\"\r\n              (change)=\"eventCall($event, 'change', field?.section, field.name)\"\r\n            />\r\n          </ng-container>\r\n          <!-- Label for non-form types -->\r\n          <label *ngIf=\"!nonFormTypes.includes(field.type) && field.label\" class=\"{{ field.labelClass }}\">\r\n            {{ field.label }}\r\n            <span style=\"color: red;\" *ngIf=\"field.required\">*</span>\r\n          </label>\r\n          <!-- Input fields for text, number, email, password -->\r\n          <ng-container *ngIf=\"['text', 'number', 'email', 'password'].includes(field.type)\">\r\n            <input\r\n              [formControlName]=\"field.name\"\r\n              [type]=\"field.type === 'password' ? (passwordVisibility[field.name] ? 'text' : 'password') : field.type\"\r\n              class=\"{{ field.class }}\"\r\n              (input)=\"eventCall($event, 'input', field?.section, field.name)\"\r\n              (focus)=\"eventCall($event, 'focus', field?.section, field.name)\"\r\n              (blur)=\"eventCall($event, 'input', field?.section, field.name)\"\r\n            />\r\n            <span class=\"view-icon\" *ngIf=\"field.type === 'password'\" (click)=\"passwordVisibility[field.name] = !passwordVisibility[field.name]\"\r\n              [ngClass]=\"!passwordVisibility[field.name] ? 'eye' : 'eye-slash'\" style=\"cursor: pointer;\">\r\n              <!-- SVG icons for password visibility -->\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" *ngIf=\"!passwordVisibility[field.name]\" viewBox=\"0 0 256 256\">\r\n                <!-- Path for the eye icon -->\r\n              </svg>\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" *ngIf=\"passwordVisibility[field.name]\" viewBox=\"0 0 256 256\">\r\n                <!-- Path for the crossed eye icon -->\r\n              </svg>\r\n            </span>\r\n          </ng-container>\r\n          <!-- Textarea field -->\r\n          <ng-container *ngIf=\"field.type === 'textarea'\">\r\n            <textarea\r\n              [formControlName]=\"field.name\"\r\n              class=\"{{ field.class }}\"\r\n              rows=\"{{ field?.extra?.rows || 1 }}\"\r\n              (input)=\"eventCall($event, 'input', field?.section, field.name)\"\r\n              (focus)=\"eventCall($event, 'focus', field?.section, field.name)\"\r\n              (blur)=\"eventCall($event, 'input', field?.section, field.name)\"\r\n            ></textarea>\r\n          </ng-container>\r\n          <!-- Select dropdown -->\r\n          <ng-container *ngIf=\"field.type === 'select'\">\r\n            <!-- Dropdown component with various event listeners -->\r\n            <ng-select #select\r\n              [formControlName]=\"field.name\"\r\n              class=\"{{ field.class }}\"\r\n              [items]=\"selectList[field.name]\"\r\n              [multiple]=\"field?.extra?.multi || false\"\r\n              [bindLabel]=\"field?.extra?.label || ''\"\r\n              [bindValue]=\"field?.extra?.key || ''\"\r\n              [searchable]=\"false\"\r\n              (change)=\"eventCall($event, 'change', field?.section, field.name)\"\r\n              (close)=\"eventCall($event, 'close', field?.section, field.name)\"\r\n              (open)=\"eventCall($event, 'focus', field?.section, field.name)\"\r\n              (clear)=\"eventCall($event, 'clear', field?.section, field.name)\"\r\n              (focus)=\"eventCall($event, 'focus', field?.section, field.name)\"\r\n              (search)=\"eventCall($event, 'search', field?.section, field.name)\"\r\n              (blur)=\"eventCall($event, 'blur', field?.section, field.name)\"\r\n            >\r\n              <!-- Custom search input -->\r\n              <ng-template ng-header-tmp>\r\n                <input #check style=\"width: 100%; line-height: 24px;\" type=\"text\" name=\"type\" placeholder=\"Search Key\"\r\n                  (input)=\"select.filter(check.value)\" />\r\n              </ng-template>\r\n            </ng-select>\r\n          </ng-container>\r\n          <!-- Heading -->\r\n          <ng-container *ngIf=\"field.type === 'heading'\">\r\n            <div class=\"{{ field.class }}\" [innerHTML]=\"field.label\"></div>\r\n          </ng-container>\r\n          <!-- Radio buttons -->\r\n          <ng-container *ngIf=\"field.type === 'radio'\">\r\n            <div class=\"{{ field?.extra?.customClass }}\">\r\n              <ng-container *ngFor=\"let item of field?.extra?.options || []\">\r\n                <div class=\"{{ field.class }}\">\r\n                  <input\r\n                    [formControlName]=\"field.name\"\r\n                    type=\"radio\"\r\n                    id=\"radio-{{ i }}\"\r\n                    class=\"{{ field.class }}-input\"\r\n                    [value]=\"field?.extra?.key ? item[field.extra?.key || ''] : item\"\r\n                    (change)=\"eventCall($event, 'change', field?.section, field.name)\"\r\n                  />\r\n                  <label class=\"{{ field.class }}-label\" for=\"radio-{{ i }}\">\r\n                    {{ field?.extra?.label ? item[field.extra?.label || ''] : item }}\r\n                  </label>\r\n                </div>\r\n              </ng-container>\r\n            </div>\r\n          </ng-container>\r\n          <!-- Date input -->\r\n          <ng-container *ngIf=\"field.type === 'date'\">\r\n            <input type=\"text\"\r\n              [formControlName]=\"field.name\"\r\n              class=\"{{ field.class }}\"\r\n              [bsConfig]=\"{\r\n                dateInputFormat: field?.extra?.format || 'DD-MM-YYYY',\r\n                adaptivePosition: true,\r\n                containerClass: field?.extra?.theme || 'theme-dark-blue',\r\n                minMode: field?.extra?.mode || 'day'\r\n              }\"\r\n              [minDate]=\"field?.extra?.minDate || undefined\"\r\n              [maxDate]=\"field?.extra?.maxDate || undefined\"\r\n              (bsValueChange)=\"eventCall($event, 'date', field?.section, field.name)\"\r\n              bsDatepicker>\r\n          </ng-container>\r\n          <!-- Date range input -->\r\n          <ng-container *ngIf=\"field.type === 'daterange'\">\r\n            <input type=\"text\"\r\n              [formControlName]=\"field.name\"\r\n              class=\"{{ field.class }}\"\r\n              [bsConfig]=\"{\r\n                rangeInputFormat: field?.extra?.format || 'DD-MM-YYYY',\r\n                adaptivePosition: true,\r\n                containerClass: field?.extra?.theme || 'theme-dark-blue',\r\n                minMode: field?.extra?.mode || 'day'\r\n              }\"\r\n              [minDate]=\"field?.extra?.minDate || undefined\"\r\n              [maxDate]=\"field?.extra?.maxDate || undefined\"\r\n              (bsValueChange)=\"eventCall($event, 'date', field?.section, field.name)\"\r\n              bsDaterangepicker>\r\n          </ng-container>\r\n          <!-- File input -->\r\n          <ng-container *ngIf=\"field.type === 'file'\">\r\n            <input\r\n              [type]=\"'file'\"\r\n              id=\"fileInput-{{ i }}\"\r\n              class=\"{{ field.class }} {{ field?.extra?.customText ? 'd-none' : '' }}\"\r\n              (change)=\"onFileSelected($event, field?.section, field.name)\"\r\n              [accept]=\"field?.extra?.format\"\r\n              [disabled]=\"field.disable\">\r\n            <label\r\n              for=\"fileInput-{{ i }}\"\r\n              class=\"{{ field?.extra?.customClass }} {{ field.disable ? 'disabled' : '' }}\"\r\n              *ngIf=\"field?.extra?.customClass\">\r\n              {{ dynamicForm.get(field.name + '_name')?.value ? dynamicForm.get(field.name + '_name')?.value : (field?.extra?.customText || 'No file chosen') }}\r\n            </label>\r\n          </ng-container>\r\n          <!-- Button -->\r\n          <ng-container *ngIf=\"field.type === 'button'\">\r\n            <button class=\"{{ field.class }}\" (click)=\"eventCall($event, 'click', field?.section, field.name, field?.extra?.submit || false)\">\r\n              {{ field.label }}\r\n            </button>\r\n          </ng-container>\r\n          <!-- Validation error messages -->\r\n          <div *ngIf=\"!controls[field.name]?.valid && controls[field.name]?.touched && field?.extra?.validationMessages\"\r\n            class=\"validation-error\">\r\n            <span class=\"text-danger\" *ngIf=\"controls[field.name]?.errors?.['required']\">\r\n              {{ field?.extra?.validationMessages?.required }}\r\n            </span>\r\n            <span class=\"text-danger\" *ngIf=\"controls[field.name]?.errors?.['pattern']\">\r\n              {{ field?.extra?.validationMessages?.pattern }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </ng-container>\r\n      <ng-content></ng-content>\r\n    </div>\r\n  </form>\r\n  ", styles: [".was-validated .form-control:invalid,.form-control.is-invalid,.form-control.ng-touched.ng-invalid,.form-select.ng-touched.ng-invalid{border-color:red;padding-right:calc(1.5em + .75rem);background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}input[type=password].form-control.ng-touched.ng-invalid,input[bsDatepicker].form-control.ng-touched.ng-invalid{background-image:unset}::ng-deep .ng-select .ng-select-container{border-color:#e2e5ec;border-radius:.25rem!important}::ng-deep .ng-select .ng-select-container .ng-arrow-wrapper .ng-arrow{background-image:url(data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2212%22%20height%3D%2212%22%20viewBox%3D%220%200%2012%2012%22%3E%3Ctitle%3Edown-arrow%3C%2Ftitle%3E%3Cg%20fill%3D%22%23000000%22%3E%3Cpath%20d%3D%22M10.293%2C3.293%2C6%2C7.586%2C1.707%2C3.293A1%2C1%2C0%2C0%2C0%2C.293%2C4.707l5%2C5a1%2C1%2C0%2C0%2C0%2C1.414%2C0l5-5a1%2C1%2C0%2C1%2C0-1.414-1.414Z%22%20fill%3D%22%23000000%22%3E%3C%2Fpath%3E%3C%2Fg%3E%3C%2Fsvg%3E);background-size:cover;background-position:center;width:9px;height:9px;background-repeat:no-repeat;border:none}::ng-deep .ng-select.ng-select-opened .ng-arrow-wrapper{top:2px}::ng-deep .ng-select.ng-select-opened .ng-arrow-wrapper .ng-arrow{background-size:cover;background-position:center}::ng-deep .ng-select.ng-invalid.ng-touched .ng-select-container{border-color:red!important}.validation-error{font-size:12px}.disabled{cursor:not-allowed}.view-icon{position:absolute;bottom:0;transform:translateY(-50%);right:20px;padding-top:0;padding-bottom:0;width:20px}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.FormBuilder }]; }, propDecorators: { config: [{
                type: Input
            }], mainClass: [{
                type: Input
            }], mode: [{
                type: Input
            }], callBack: [{
                type: Output,
                args: ['callBack']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctZHluby1mb3JtLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL25nLWR5bm8tZm9ybS9zcmMvbGliL25nLWR5bm8tZm9ybS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZy1keW5vLWZvcm0vc3JjL2xpYi9uZy1keW5vLWZvcm0uY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBaUIsTUFBTSxlQUFlLENBQUM7QUFFdEYsT0FBTyxFQUFlLFdBQVcsRUFBYSxVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7Ozs7O0FBUWpGLE1BQU0sT0FBTyxtQkFBbUI7SUFZOUIsWUFBb0IsRUFBZTtRQUFmLE9BQUUsR0FBRixFQUFFLENBQWE7UUFSMUIsU0FBSSxHQUFnQixPQUFPLENBQUM7UUFDakIsYUFBUSxHQUFzQixJQUFJLFlBQVksRUFBRSxDQUFDO1FBR3JFLHVCQUFrQixHQUFvQyxFQUFFLENBQUM7UUFDekQsZUFBVSxHQUFrQyxFQUFFLENBQUM7UUFDL0MsaUJBQVksR0FBWSxDQUFDLFFBQVEsRUFBQyxTQUFTLENBQUMsQ0FBQztRQXlDN0MsWUFBTyxHQUFHLENBQUMsSUFBUSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUVwRCxlQUFVLEdBQUcsQ0FBQyxHQUFTLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBRTNFLGlCQUFZLEdBQUcsQ0FBQyxHQUFPLEVBQUMsR0FBUSxFQUFDLElBQWEsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FB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QyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksR0FBQyxPQUFPLEVBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3hDLENBQUMsQ0FBQztZQUNGLE1BQU0sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDOUI7YUFBSztZQUNKLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxHQUFDLE9BQU8sRUFBQyxFQUFFLENBQUMsQ0FBQztZQUMvQixLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBQyxJQUFJLENBQUM7U0FDekI7UUFDRCxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBQyxNQUFNLEVBQUMsT0FBTyxFQUFDLElBQUksQ0FBQyxDQUFDO0lBQzVDLENBQUM7OEdBbExVLG1CQUFtQjtrR0FBbkIsbUJBQW1CLDZLQ1ZoQyxpeFNBMktFOzsyRkRqS1csbUJBQW1CO2tCQUwvQixTQUFTOytCQUNFLFdBQVc7a0dBTVosTUFBTTtzQkFBZCxLQUFLO2dCQUNHLFNBQVM7c0JBQWpCLEtBQUs7Z0JBQ0csSUFBSTtzQkFBWixLQUFLO2dCQUNjLFFBQVE7c0JBQTNCLE1BQU07dUJBQUMsVUFBVSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT3V0cHV0LCBTaW1wbGVDaGFuZ2VzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBEeW5vRm9ybUNvbmZpZyB9IGZyb20gJy4vbmctZHluby1mb3JtLWNvbmZpZy5tb2RlbCc7XG5pbXBvcnQgeyBGb3JtQnVpbGRlciwgRm9ybUNvbnRyb2wsIEZvcm1Hcm91cCwgVmFsaWRhdG9ycyB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcblxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdkeW5vLWZvcm0nLFxuICB0ZW1wbGF0ZVVybDogJy4vbmctZHluby1mb3JtLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vbmctZHluby1mb3JtLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgTmdEeW5vRm9ybUNvbXBvbmVudCB7XG5cbiAgQElucHV0KCkgY29uZmlnITpEeW5vRm9ybUNvbmZpZ1tdO1xuICBASW5wdXQoKSBtYWluQ2xhc3M6YW55O1xuICBASW5wdXQoKSBtb2RlOidsaWdodCd8J2RhcmsnPSdsaWdodCc7XG4gIEBPdXRwdXQoJ2NhbGxCYWNrJykgY2FsbEJhY2s6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIGR5bmFtaWNGb3JtOkZvcm1Hcm91cDtcbiAgcGFzc3dvcmRWaXNpYmlsaXR5OnsgW2ZpZWxkTmFtZTogc3RyaW5nXTogYm9vbGVhbiB9ID0ge307XG4gIHNlbGVjdExpc3Q6eyBbZmllbGROYW1lOiBzdHJpbmddOiBhbnlbXSB9ID0ge307XG4gIG5vbkZvcm1UeXBlczpzdHJpbmdbXSA9IFsnYnV0dG9uJywnaGVhZGluZyddO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZmI6IEZvcm1CdWlsZGVyKSB7XG4gICAgdGhpcy5keW5hbWljRm9ybSA9IHRoaXMuZmIuZ3JvdXAoe30pO1xuICB9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5idWlsZEZvcm0oKTtcbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpe1xuICAgIGlmKGNoYW5nZXNbJ2NvbmZpZyddKXtcbiAgICAgIHRoaXMuYnVpbGRGb3JtKCk7XG4gICAgfVxuICB9XG5cbiAgYnVpbGRGb3JtKCl7XG4gICAgdGhpcy5keW5hbWljRm9ybSA9IHRoaXMuZmIuZ3JvdXAoe30pO1xuICAgIGlmKHRoaXMuY29uZmlnICYmIHRoaXMuY29uZmlnPy5sZW5ndGgpe1xuICAgICAgdGhpcy5jb25maWcuZm9yRWFjaCgoZmllbGQ6YW55KSA9PiB7XG4gICAgICAgIGlmKGZpZWxkLm5hbWUgJiYgIXRoaXMubm9uRm9ybVR5cGVzLmluY2x1ZGVzKGZpZWxkLnR5cGUpKXtcbiAgICAgICAgICBsZXQgdmFsaWRhdG9ycyA9IFtdO1xuICAgICAgICAgIGZpZWxkLnJlcXVpcmVkPyB2YWxpZGF0b3JzLnB1c2goVmFsaWRhdG9ycy5yZXF1aXJlZCk6IG51bGw7XG4gICAgICAgICAgZmllbGQucGF0dGVybj8gdmFsaWRhdG9ycy5wdXNoKFZhbGlkYXRvcnMucGF0dGVybihmaWVsZC5wYXR0ZXJuKSk6IG51bGw7XG4gICAgICAgICAgdGhpcy5keW5hbWljRm9ybS5hZGRDb250cm9sKGZpZWxkLm5hbWUsIG5ldyBGb3JtQ29udHJvbCh7dmFsdWU6ZmllbGQudmFsdWV8fG51bGwsZGlzYWJsZWQ6ZmllbGQuZGlzYWJsZXx8ZmFsc2V9LCB2YWxpZGF0b3JzKSk7XG4gICAgICAgICAgaWYoZmllbGQudHlwZT09PSdmaWxlJykgdGhpcy5keW5hbWljRm9ybS5hZGRDb250cm9sKGZpZWxkLm5hbWUrJ19uYW1lJywgbmV3IEZvcm1Db250cm9sKGZpZWxkPy5leHRyYT8uZmlsZU5hbWV8fG51bGwpKTtcbiAgICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gJ3Bhc3N3b3JkJykgdGhpcy5wYXNzd29yZFZpc2liaWxpdHlbZmllbGQubmFtZV0gPSBmYWxzZTtcbiAgICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gJ3NlbGVjdCcpIHRoaXMuc2VsZWN0TGlzdFtmaWVsZC5uYW1lXSA9IGZpZWxkPy5leHRyYT8ub3B0aW9uc3x8W107XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGdldCBjb250cm9scygpIHsgcmV0dXJuIHRoaXMuZHluYW1pY0Zvcm0uY29udHJvbHN9XG5cbiAgZ2V0IGFsbEtleXMoKSB7IHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmR5bmFtaWNGb3JtLmdldFJhd1ZhbHVlKCkpfVxuXG4gIGdldCByYXdWYWx1ZXMoKSB7IHJldHVybiB0aGlzLmR5bmFtaWNGb3JtLmdldFJhd1ZhbHVlKCl9XG5cbiAgZ2V0IGZvcm1WYWx1ZXMoKSB7IHJldHVybiB0aGlzLmR5bmFtaWNGb3JtLnZhbHVlfVxuXG4gIGhhc0N0cmwgPSAoY3RybDphbnkpID0+IHRoaXMuYWxsS2V5cy5pbmNsdWRlcyhjdHJsKTtcblxuICBoYXNBbGxLZXlzID0gKGFycjphbnlbXSkgPT4gYXJyLmV2ZXJ5KGVsZW0gPT4gdGhpcy5hbGxLZXlzLmluY2x1ZGVzKGVsZW0pKTtcblxuICBmaWx0ZXJDb25maWcgPSAoa2V5OmFueSx2YWw/OmFueSxib29sPzpib29sZWFuKSA9PiB0aGlzLmNvbmZpZy5maWx0ZXIoKGVsZTphbnkpID0+IHZhbCA/IGVsZVtrZXldPT09dmFsIDogKGJvb2w/ZWxlW2tleV06IWVsZVtrZXldKSk7XG4gIFxuICBnZXRUeXBlS2V5cyA9ICh0eXBlOmFueSx2YWx1ZT86YW55LGJvb2w/OmJvb2xlYW4pID0+ICh0aGlzLmZpbHRlckNvbmZpZyh0eXBlLHZhbHVlLGJvb2wpKS5tYXAoKGVsZTphbnkpPT5lbGVbJ25hbWUnXSk7XG5cbiAgZ2V0VHlwZVZhbHVlcyA9ICh0eXBlOmFueSx2YWx1ZT86YW55LGJvb2w/OmJvb2xlYW4pID0+IHRoaXMuZ2V0VHlwZUtleXModHlwZSx2YWx1ZSxib29sKS5yZWR1Y2UoKGFjYywga2V5KSA9PiAodGhpcy5yYXdWYWx1ZXMuaGFzT3duUHJvcGVydHkoa2V5KT8geyAuLi5hY2MsIFtrZXldOiB0aGlzLnJhd1ZhbHVlc1trZXldIH0gOiBhY2MpLCB7fSk7XG5cblxuICBhZGRWYWxpZGF0aW9uKHZhbGlkYXRpb246YW55W10sLi4uY3RybHM6c3RyaW5nW10pe1xuICAgIGN0cmxzLmZvckVhY2goKGN0cmw6YW55KT0+e1xuICAgICAgaWYodGhpcy5oYXNDdHJsKGN0cmwpKXtcbiAgICAgICAgdGhpcy5keW5hbWljRm9ybS5nZXQoY3RybCk/LmFkZFZhbGlkYXRvcnModmFsaWRhdGlvbik7XG4gICAgICAgIHRoaXMuZHluYW1pY0Zvcm0uZ2V0KGN0cmwpPy51cGRhdGVWYWx1ZUFuZFZhbGlkaXR5KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBjbGVhclZhbGlkYXRpb24oLi4uY3RybHM6c3RyaW5nW10pe1xuICAgIGN0cmxzLmZvckVhY2goKGN0cmw6YW55KT0+e1xuICAgICAgaWYodGhpcy5oYXNDdHJsKGN0cmwpKXtcbiAgICAgICAgdGhpcy5keW5hbWljRm9ybS5nZXQoY3RybCk/LmNsZWFyVmFsaWRhdG9ycygpO1xuICAgICAgICB0aGlzLmR5bmFtaWNGb3JtLmdldChjdHJsKT8udXBkYXRlVmFsdWVBbmRWYWxpZGl0eSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgc2V0VmFsdWUoY3RybDpzdHJpbmcsdmFsdWU6YW55KXtcbiAgICBpZih0aGlzLmhhc0N0cmwoY3RybCkpe1xuICAgICAgdGhpcy5keW5hbWljRm9ybS5nZXQoY3RybCk/LnNldFZhbHVlKHZhbHVlKTtcbiAgICAgIHRoaXMuZHluYW1pY0Zvcm0uZ2V0KGN0cmwpPy51cGRhdGVWYWx1ZUFuZFZhbGlkaXR5KCk7XG4gICAgfVxuICB9XG5cbiAgcGF0Y2hWYWx1ZShvYmo6YW55KXtcbiAgICBpZihvYmogJiYgdGhpcy5oYXNBbGxLZXlzKE9iamVjdC5rZXlzKG9iaikpKXtcbiAgICAgIHRoaXMuZHluYW1pY0Zvcm0ucGF0Y2hWYWx1ZShvYmopO1xuICAgIH1cbiAgfVxuXG4gIHJlc2V0VmFsdWUoLi4uY3RybHM6YW55KXtcbiAgICBpZihjdHJscz09PSdhbGwnKSB0aGlzLmR5bmFtaWNGb3JtLnJlc2V0KCk7XG4gICAgZWxzZXtcbiAgICAgIGN0cmxzLmZvckVhY2goKGN0cmw6YW55KT0+e1xuICAgICAgICBpZih0aGlzLmhhc0N0cmwoY3RybCkpIHRoaXMuc2V0VmFsdWUoY3RybCxudWxsKTtcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgZGlzYWJsZUZpZWxkKC4uLmN0cmxzOmFueSl7XG4gICAgaWYoY3RybHM9PT0nYWxsJykgY3RybHMgPSBPYmplY3Qua2V5cyh0aGlzLmR5bmFtaWNGb3JtLmdldFJhd1ZhbHVlKCkpO1xuICAgIGN0cmxzLmZvckVhY2goKGN0cmw6YW55KT0+e1xuICAgICAgaWYodGhpcy5oYXNDdHJsKGN0cmwpKXtcbiAgICAgICAgdGhpcy5keW5hbWljRm9ybS5nZXQoY3RybCk/LmRpc2FibGUoKTtcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZW5hYmxlRmllbGQoLi4uY3RybHM6YW55KXtcbiAgICBpZihjdHJscz09PSdhbGwnKSBjdHJscyA9IE9iamVjdC5rZXlzKHRoaXMuZHluYW1pY0Zvcm0uZ2V0UmF3VmFsdWUoKSk7XG4gICAgY3RybHMuZm9yRWFjaCgoY3RybDphbnkpPT57XG4gICAgICBpZih0aGlzLmhhc0N0cmwoY3RybCkpe1xuICAgICAgICB0aGlzLmR5bmFtaWNGb3JtLmdldChjdHJsKT8uZW5hYmxlKCk7XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHNlY3Rpb25WYWxpZGF0b3Ioc2VjdGlvbjpzdHJpbmcpe1xuICAgIGlmKHNlY3Rpb258fHNlY3Rpb249PT0nJyl7XG4gICAgICBsZXQgY3RybHMgPSB0aGlzLmZpbHRlckNvbmZpZygnc2VjdGlvbicsc2VjdGlvbj9zZWN0aW9uOnVuZGVmaW5lZCxmYWxzZSkubWFwKChlOmFueSk9PmUubmFtZSk7XG4gICAgICBjdHJscz8uZm9yRWFjaCgoY3RybDphbnkpPT57XG4gICAgICAgIHRoaXMuZHluYW1pY0Zvcm0uZ2V0KGN0cmwpPy5tYXJrQXNUb3VjaGVkKCk7XG4gICAgICB9KVxuICAgICAgcmV0dXJuIGN0cmxzPy5ldmVyeSgoY3RybDphbnkpPT50aGlzLmR5bmFtaWNGb3JtPy5nZXQoY3RybCk/LnZhbGlkKTtcbiAgICB9IGVsc2V7XG4gICAgICB0aGlzLmR5bmFtaWNGb3JtLm1hcmtBbGxBc1RvdWNoZWQoKTtcbiAgICAgIHJldHVybiB0aGlzLmR5bmFtaWNGb3JtLnZhbGlkO1xuICAgIH1cbiAgfVxuXG4gIHNlY3Rpb25TdWJtaXQoc2VjdGlvbjpzdHJpbmcpe1xuICAgIGxldCB2YWxpZCA9IHRoaXMuc2VjdGlvblZhbGlkYXRvcihzZWN0aW9uKTtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQgOiB2YWxpZCxcbiAgICAgIHZhbHVlcyA6IChzZWN0aW9ufHxzZWN0aW9uPT09JycpID8gdGhpcy5nZXRUeXBlVmFsdWVzKCdzZWN0aW9uJyxzZWN0aW9uP3NlY3Rpb246dW5kZWZpbmVkLGZhbHNlKSA6IHRoaXMucmF3VmFsdWVzXG4gICAgfVxuICB9XG5cbiAgZm9ybXN1Ym1pdCgpe1xuICAgIHRoaXMuZHluYW1pY0Zvcm0ubWFya0FsbEFzVG91Y2hlZCgpO1xuICAgIHJldHVybiB7XG4gICAgICB2YWxpZCA6IHRoaXMuZHluYW1pY0Zvcm0udmFsaWQsXG4gICAgICB2YWx1ZXMgOiB0aGlzLnJhd1ZhbHVlc1xuICAgIH1cbiAgfVxuXG4gIGV2ZW50Q2FsbChlOmFueSx0eXBlOnN0cmluZyxzZWN0aW9uOmFueSxuYW1lOnN0cmluZyxzdWJtaXQ/OmFueSl7XG4gICAgbGV0IHZhbHVlcyA9IG51bGw7XG4gICAgaWYoc3VibWl0KXtcbiAgICAgIHZhbHVlcyA9IHRoaXMuc2VjdGlvblN1Ym1pdChzZWN0aW9uKTtcbiAgICB9XG4gICAgdGhpcy5jYWxsQmFjay5lbWl0KHtcbiAgICAgIGV2ZW50IDogc3VibWl0P3ZhbHVlczplLFxuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIHNlY3Rpb246IHNlY3Rpb24sXG4gICAgICBuYW1lIDogbmFtZVxuICAgIH0pO1xuICB9XG5cbiAgb25GaWxlU2VsZWN0ZWQoZXZlbnQ6YW55LHNlY3Rpb246YW55LG5hbWU6c3RyaW5nKXtcbiAgICBsZXQgY29uZmlnID0gdGhpcy5jb25maWcuZmluZCgoZTphbnkpPT5lLm5hbWU9PT1uYW1lKTtcbiAgICBjb25zdCBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdO1xuICAgIGlmIChmaWxlICYmIGNvbmZpZyAmJiAoY29uZmlnPy5leHRyYT8uZm9ybWF0Py5pbmNsdWRlcyhmaWxlLnR5cGUpfHwhY29uZmlnPy5leHRyYT8uZm9ybWF0KSkge1xuICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IChlOiBhbnkpID0+IHtcbiAgICAgICAgICB0aGlzLnNldFZhbHVlKG5hbWUsZS50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgICB0aGlzLnNldFZhbHVlKG5hbWUrJ19uYW1lJyxmaWxlLm5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcbiAgICB9IGVsc2V7XG4gICAgICB0aGlzLnNldFZhbHVlKG5hbWUsJycpO1xuICAgICAgdGhpcy5zZXRWYWx1ZShuYW1lKydfbmFtZScsJycpO1xuICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlPW51bGw7XG4gICAgfVxuICAgIHRoaXMuZXZlbnRDYWxsKGV2ZW50LCdmaWxlJyxzZWN0aW9uLG5hbWUpO1xuICB9XG4gIFxufSIsIjwhLS0gRm9ybSBFbGVtZW50IC0tPlxyXG48Zm9ybSBbZm9ybUdyb3VwXT1cImR5bmFtaWNGb3JtXCIgW2F0dHIuZGF0YS1icy10aGVtZV09XCJtb2RlXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwie3sgbWFpbkNsYXNzIH19XCI+XHJcbiAgICAgIDwhLS0gTG9vcCB0aHJvdWdoIGZvcm0gZmllbGRzIC0tPlxyXG4gICAgICA8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBmaWVsZCBvZiBjb25maWc7IGxldCBpID0gaW5kZXhcIj5cclxuICAgICAgICA8ZGl2ICpuZ0lmPVwiIWZpZWxkLmNvbmRpdGlvbiB8fCBmaWVsZC5jb25kaXRpb24oZHluYW1pY0Zvcm0udmFsdWUpXCIgY2xhc3M9XCJ7eyBmaWVsZC5wYXJlbnRDbGFzcyB9fSBwb3NpdGlvbi1yZWxhdGl2ZVwiPlxyXG4gICAgICAgICAgPCEtLSBDaGVjayBmb3IgY2hlY2tib3ggdHlwZSAtLT5cclxuICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJmaWVsZC50eXBlID09PSAnY2hlY2tib3gnXCI+XHJcbiAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgIFtmb3JtQ29udHJvbE5hbWVdPVwiZmllbGQubmFtZVwiXHJcbiAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcclxuICAgICAgICAgICAgICBjbGFzcz1cInt7IGZpZWxkLmNsYXNzIH19XCJcclxuICAgICAgICAgICAgICAoY2hhbmdlKT1cImV2ZW50Q2FsbCgkZXZlbnQsICdjaGFuZ2UnLCBmaWVsZD8uc2VjdGlvbiwgZmllbGQubmFtZSlcIlxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICAgICAgICA8IS0tIExhYmVsIGZvciBub24tZm9ybSB0eXBlcyAtLT5cclxuICAgICAgICAgIDxsYWJlbCAqbmdJZj1cIiFub25Gb3JtVHlwZXMuaW5jbHVkZXMoZmllbGQudHlwZSkgJiYgZmllbGQubGFiZWxcIiBjbGFzcz1cInt7IGZpZWxkLmxhYmVsQ2xhc3MgfX1cIj5cclxuICAgICAgICAgICAge3sgZmllbGQubGFiZWwgfX1cclxuICAgICAgICAgICAgPHNwYW4gc3R5bGU9XCJjb2xvcjogcmVkO1wiICpuZ0lmPVwiZmllbGQucmVxdWlyZWRcIj4qPC9zcGFuPlxyXG4gICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgIDwhLS0gSW5wdXQgZmllbGRzIGZvciB0ZXh0LCBudW1iZXIsIGVtYWlsLCBwYXNzd29yZCAtLT5cclxuICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJbJ3RleHQnLCAnbnVtYmVyJywgJ2VtYWlsJywgJ3Bhc3N3b3JkJ10uaW5jbHVkZXMoZmllbGQudHlwZSlcIj5cclxuICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgW2Zvcm1Db250cm9sTmFtZV09XCJmaWVsZC5uYW1lXCJcclxuICAgICAgICAgICAgICBbdHlwZV09XCJmaWVsZC50eXBlID09PSAncGFzc3dvcmQnID8gKHBhc3N3b3JkVmlzaWJpbGl0eVtmaWVsZC5uYW1lXSA/ICd0ZXh0JyA6ICdwYXNzd29yZCcpIDogZmllbGQudHlwZVwiXHJcbiAgICAgICAgICAgICAgY2xhc3M9XCJ7eyBmaWVsZC5jbGFzcyB9fVwiXHJcbiAgICAgICAgICAgICAgKGlucHV0KT1cImV2ZW50Q2FsbCgkZXZlbnQsICdpbnB1dCcsIGZpZWxkPy5zZWN0aW9uLCBmaWVsZC5uYW1lKVwiXHJcbiAgICAgICAgICAgICAgKGZvY3VzKT1cImV2ZW50Q2FsbCgkZXZlbnQsICdmb2N1cycsIGZpZWxkPy5zZWN0aW9uLCBmaWVsZC5uYW1lKVwiXHJcbiAgICAgICAgICAgICAgKGJsdXIpPVwiZXZlbnRDYWxsKCRldmVudCwgJ2lucHV0JywgZmllbGQ/LnNlY3Rpb24sIGZpZWxkLm5hbWUpXCJcclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ2aWV3LWljb25cIiAqbmdJZj1cImZpZWxkLnR5cGUgPT09ICdwYXNzd29yZCdcIiAoY2xpY2spPVwicGFzc3dvcmRWaXNpYmlsaXR5W2ZpZWxkLm5hbWVdID0gIXBhc3N3b3JkVmlzaWJpbGl0eVtmaWVsZC5uYW1lXVwiXHJcbiAgICAgICAgICAgICAgW25nQ2xhc3NdPVwiIXBhc3N3b3JkVmlzaWJpbGl0eVtmaWVsZC5uYW1lXSA/ICdleWUnIDogJ2V5ZS1zbGFzaCdcIiBzdHlsZT1cImN1cnNvcjogcG9pbnRlcjtcIj5cclxuICAgICAgICAgICAgICA8IS0tIFNWRyBpY29ucyBmb3IgcGFzc3dvcmQgdmlzaWJpbGl0eSAtLT5cclxuICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiAqbmdJZj1cIiFwYXNzd29yZFZpc2liaWxpdHlbZmllbGQubmFtZV1cIiB2aWV3Qm94PVwiMCAwIDI1NiAyNTZcIj5cclxuICAgICAgICAgICAgICAgIDwhLS0gUGF0aCBmb3IgdGhlIGV5ZSBpY29uIC0tPlxyXG4gICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiICpuZ0lmPVwicGFzc3dvcmRWaXNpYmlsaXR5W2ZpZWxkLm5hbWVdXCIgdmlld0JveD1cIjAgMCAyNTYgMjU2XCI+XHJcbiAgICAgICAgICAgICAgICA8IS0tIFBhdGggZm9yIHRoZSBjcm9zc2VkIGV5ZSBpY29uIC0tPlxyXG4gICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgICAgIDwhLS0gVGV4dGFyZWEgZmllbGQgLS0+XHJcbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiZmllbGQudHlwZSA9PT0gJ3RleHRhcmVhJ1wiPlxyXG4gICAgICAgICAgICA8dGV4dGFyZWFcclxuICAgICAgICAgICAgICBbZm9ybUNvbnRyb2xOYW1lXT1cImZpZWxkLm5hbWVcIlxyXG4gICAgICAgICAgICAgIGNsYXNzPVwie3sgZmllbGQuY2xhc3MgfX1cIlxyXG4gICAgICAgICAgICAgIHJvd3M9XCJ7eyBmaWVsZD8uZXh0cmE/LnJvd3MgfHwgMSB9fVwiXHJcbiAgICAgICAgICAgICAgKGlucHV0KT1cImV2ZW50Q2FsbCgkZXZlbnQsICdpbnB1dCcsIGZpZWxkPy5zZWN0aW9uLCBmaWVsZC5uYW1lKVwiXHJcbiAgICAgICAgICAgICAgKGZvY3VzKT1cImV2ZW50Q2FsbCgkZXZlbnQsICdmb2N1cycsIGZpZWxkPy5zZWN0aW9uLCBmaWVsZC5uYW1lKVwiXHJcbiAgICAgICAgICAgICAgKGJsdXIpPVwiZXZlbnRDYWxsKCRldmVudCwgJ2lucHV0JywgZmllbGQ/LnNlY3Rpb24sIGZpZWxkLm5hbWUpXCJcclxuICAgICAgICAgICAgPjwvdGV4dGFyZWE+XHJcbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgICAgIDwhLS0gU2VsZWN0IGRyb3Bkb3duIC0tPlxyXG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImZpZWxkLnR5cGUgPT09ICdzZWxlY3QnXCI+XHJcbiAgICAgICAgICAgIDwhLS0gRHJvcGRvd24gY29tcG9uZW50IHdpdGggdmFyaW91cyBldmVudCBsaXN0ZW5lcnMgLS0+XHJcbiAgICAgICAgICAgIDxuZy1zZWxlY3QgI3NlbGVjdFxyXG4gICAgICAgICAgICAgIFtmb3JtQ29udHJvbE5hbWVdPVwiZmllbGQubmFtZVwiXHJcbiAgICAgICAgICAgICAgY2xhc3M9XCJ7eyBmaWVsZC5jbGFzcyB9fVwiXHJcbiAgICAgICAgICAgICAgW2l0ZW1zXT1cInNlbGVjdExpc3RbZmllbGQubmFtZV1cIlxyXG4gICAgICAgICAgICAgIFttdWx0aXBsZV09XCJmaWVsZD8uZXh0cmE/Lm11bHRpIHx8IGZhbHNlXCJcclxuICAgICAgICAgICAgICBbYmluZExhYmVsXT1cImZpZWxkPy5leHRyYT8ubGFiZWwgfHwgJydcIlxyXG4gICAgICAgICAgICAgIFtiaW5kVmFsdWVdPVwiZmllbGQ/LmV4dHJhPy5rZXkgfHwgJydcIlxyXG4gICAgICAgICAgICAgIFtzZWFyY2hhYmxlXT1cImZhbHNlXCJcclxuICAgICAgICAgICAgICAoY2hhbmdlKT1cImV2ZW50Q2FsbCgkZXZlbnQsICdjaGFuZ2UnLCBmaWVsZD8uc2VjdGlvbiwgZmllbGQubmFtZSlcIlxyXG4gICAgICAgICAgICAgIChjbG9zZSk9XCJldmVudENhbGwoJGV2ZW50LCAnY2xvc2UnLCBmaWVsZD8uc2VjdGlvbiwgZmllbGQubmFtZSlcIlxyXG4gICAgICAgICAgICAgIChvcGVuKT1cImV2ZW50Q2FsbCgkZXZlbnQsICdmb2N1cycsIGZpZWxkPy5zZWN0aW9uLCBmaWVsZC5uYW1lKVwiXHJcbiAgICAgICAgICAgICAgKGNsZWFyKT1cImV2ZW50Q2FsbCgkZXZlbnQsICdjbGVhcicsIGZpZWxkPy5zZWN0aW9uLCBmaWVsZC5uYW1lKVwiXHJcbiAgICAgICAgICAgICAgKGZvY3VzKT1cImV2ZW50Q2FsbCgkZXZlbnQsICdmb2N1cycsIGZpZWxkPy5zZWN0aW9uLCBmaWVsZC5uYW1lKVwiXHJcbiAgICAgICAgICAgICAgKHNlYXJjaCk9XCJldmVudENhbGwoJGV2ZW50LCAnc2VhcmNoJywgZmllbGQ/LnNlY3Rpb24sIGZpZWxkLm5hbWUpXCJcclxuICAgICAgICAgICAgICAoYmx1cik9XCJldmVudENhbGwoJGV2ZW50LCAnYmx1cicsIGZpZWxkPy5zZWN0aW9uLCBmaWVsZC5uYW1lKVwiXHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICA8IS0tIEN1c3RvbSBzZWFyY2ggaW5wdXQgLS0+XHJcbiAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlIG5nLWhlYWRlci10bXA+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgI2NoZWNrIHN0eWxlPVwid2lkdGg6IDEwMCU7IGxpbmUtaGVpZ2h0OiAyNHB4O1wiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInR5cGVcIiBwbGFjZWhvbGRlcj1cIlNlYXJjaCBLZXlcIlxyXG4gICAgICAgICAgICAgICAgICAoaW5wdXQpPVwic2VsZWN0LmZpbHRlcihjaGVjay52YWx1ZSlcIiAvPlxyXG4gICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XHJcbiAgICAgICAgICAgIDwvbmctc2VsZWN0PlxyXG4gICAgICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICAgICAgICA8IS0tIEhlYWRpbmcgLS0+XHJcbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiZmllbGQudHlwZSA9PT0gJ2hlYWRpbmcnXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ7eyBmaWVsZC5jbGFzcyB9fVwiIFtpbm5lckhUTUxdPVwiZmllbGQubGFiZWxcIj48L2Rpdj5cclxuICAgICAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgICAgICAgPCEtLSBSYWRpbyBidXR0b25zIC0tPlxyXG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImZpZWxkLnR5cGUgPT09ICdyYWRpbydcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInt7IGZpZWxkPy5leHRyYT8uY3VzdG9tQ2xhc3MgfX1cIj5cclxuICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBpdGVtIG9mIGZpZWxkPy5leHRyYT8ub3B0aW9ucyB8fCBbXVwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInt7IGZpZWxkLmNsYXNzIH19XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgIFtmb3JtQ29udHJvbE5hbWVdPVwiZmllbGQubmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cInJhZGlvXCJcclxuICAgICAgICAgICAgICAgICAgICBpZD1cInJhZGlvLXt7IGkgfX1cIlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwie3sgZmllbGQuY2xhc3MgfX0taW5wdXRcIlxyXG4gICAgICAgICAgICAgICAgICAgIFt2YWx1ZV09XCJmaWVsZD8uZXh0cmE/LmtleSA/IGl0ZW1bZmllbGQuZXh0cmE/LmtleSB8fCAnJ10gOiBpdGVtXCJcclxuICAgICAgICAgICAgICAgICAgICAoY2hhbmdlKT1cImV2ZW50Q2FsbCgkZXZlbnQsICdjaGFuZ2UnLCBmaWVsZD8uc2VjdGlvbiwgZmllbGQubmFtZSlcIlxyXG4gICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJ7eyBmaWVsZC5jbGFzcyB9fS1sYWJlbFwiIGZvcj1cInJhZGlvLXt7IGkgfX1cIj5cclxuICAgICAgICAgICAgICAgICAgICB7eyBmaWVsZD8uZXh0cmE/LmxhYmVsID8gaXRlbVtmaWVsZC5leHRyYT8ubGFiZWwgfHwgJyddIDogaXRlbSB9fVxyXG4gICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICAgICAgICA8IS0tIERhdGUgaW5wdXQgLS0+XHJcbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiZmllbGQudHlwZSA9PT0gJ2RhdGUnXCI+XHJcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgW2Zvcm1Db250cm9sTmFtZV09XCJmaWVsZC5uYW1lXCJcclxuICAgICAgICAgICAgICBjbGFzcz1cInt7IGZpZWxkLmNsYXNzIH19XCJcclxuICAgICAgICAgICAgICBbYnNDb25maWddPVwie1xyXG4gICAgICAgICAgICAgICAgZGF0ZUlucHV0Rm9ybWF0OiBmaWVsZD8uZXh0cmE/LmZvcm1hdCB8fCAnREQtTU0tWVlZWScsXHJcbiAgICAgICAgICAgICAgICBhZGFwdGl2ZVBvc2l0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyQ2xhc3M6IGZpZWxkPy5leHRyYT8udGhlbWUgfHwgJ3RoZW1lLWRhcmstYmx1ZScsXHJcbiAgICAgICAgICAgICAgICBtaW5Nb2RlOiBmaWVsZD8uZXh0cmE/Lm1vZGUgfHwgJ2RheSdcclxuICAgICAgICAgICAgICB9XCJcclxuICAgICAgICAgICAgICBbbWluRGF0ZV09XCJmaWVsZD8uZXh0cmE/Lm1pbkRhdGUgfHwgdW5kZWZpbmVkXCJcclxuICAgICAgICAgICAgICBbbWF4RGF0ZV09XCJmaWVsZD8uZXh0cmE/Lm1heERhdGUgfHwgdW5kZWZpbmVkXCJcclxuICAgICAgICAgICAgICAoYnNWYWx1ZUNoYW5nZSk9XCJldmVudENhbGwoJGV2ZW50LCAnZGF0ZScsIGZpZWxkPy5zZWN0aW9uLCBmaWVsZC5uYW1lKVwiXHJcbiAgICAgICAgICAgICAgYnNEYXRlcGlja2VyPlxyXG4gICAgICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICAgICAgICA8IS0tIERhdGUgcmFuZ2UgaW5wdXQgLS0+XHJcbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiZmllbGQudHlwZSA9PT0gJ2RhdGVyYW5nZSdcIj5cclxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICBbZm9ybUNvbnRyb2xOYW1lXT1cImZpZWxkLm5hbWVcIlxyXG4gICAgICAgICAgICAgIGNsYXNzPVwie3sgZmllbGQuY2xhc3MgfX1cIlxyXG4gICAgICAgICAgICAgIFtic0NvbmZpZ109XCJ7XHJcbiAgICAgICAgICAgICAgICByYW5nZUlucHV0Rm9ybWF0OiBmaWVsZD8uZXh0cmE/LmZvcm1hdCB8fCAnREQtTU0tWVlZWScsXHJcbiAgICAgICAgICAgICAgICBhZGFwdGl2ZVBvc2l0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyQ2xhc3M6IGZpZWxkPy5leHRyYT8udGhlbWUgfHwgJ3RoZW1lLWRhcmstYmx1ZScsXHJcbiAgICAgICAgICAgICAgICBtaW5Nb2RlOiBmaWVsZD8uZXh0cmE/Lm1vZGUgfHwgJ2RheSdcclxuICAgICAgICAgICAgICB9XCJcclxuICAgICAgICAgICAgICBbbWluRGF0ZV09XCJmaWVsZD8uZXh0cmE/Lm1pbkRhdGUgfHwgdW5kZWZpbmVkXCJcclxuICAgICAgICAgICAgICBbbWF4RGF0ZV09XCJmaWVsZD8uZXh0cmE/Lm1heERhdGUgfHwgdW5kZWZpbmVkXCJcclxuICAgICAgICAgICAgICAoYnNWYWx1ZUNoYW5nZSk9XCJldmVudENhbGwoJGV2ZW50LCAnZGF0ZScsIGZpZWxkPy5zZWN0aW9uLCBmaWVsZC5uYW1lKVwiXHJcbiAgICAgICAgICAgICAgYnNEYXRlcmFuZ2VwaWNrZXI+XHJcbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgICAgIDwhLS0gRmlsZSBpbnB1dCAtLT5cclxuICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJmaWVsZC50eXBlID09PSAnZmlsZSdcIj5cclxuICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgW3R5cGVdPVwiJ2ZpbGUnXCJcclxuICAgICAgICAgICAgICBpZD1cImZpbGVJbnB1dC17eyBpIH19XCJcclxuICAgICAgICAgICAgICBjbGFzcz1cInt7IGZpZWxkLmNsYXNzIH19IHt7IGZpZWxkPy5leHRyYT8uY3VzdG9tVGV4dCA/ICdkLW5vbmUnIDogJycgfX1cIlxyXG4gICAgICAgICAgICAgIChjaGFuZ2UpPVwib25GaWxlU2VsZWN0ZWQoJGV2ZW50LCBmaWVsZD8uc2VjdGlvbiwgZmllbGQubmFtZSlcIlxyXG4gICAgICAgICAgICAgIFthY2NlcHRdPVwiZmllbGQ/LmV4dHJhPy5mb3JtYXRcIlxyXG4gICAgICAgICAgICAgIFtkaXNhYmxlZF09XCJmaWVsZC5kaXNhYmxlXCI+XHJcbiAgICAgICAgICAgIDxsYWJlbFxyXG4gICAgICAgICAgICAgIGZvcj1cImZpbGVJbnB1dC17eyBpIH19XCJcclxuICAgICAgICAgICAgICBjbGFzcz1cInt7IGZpZWxkPy5leHRyYT8uY3VzdG9tQ2xhc3MgfX0ge3sgZmllbGQuZGlzYWJsZSA/ICdkaXNhYmxlZCcgOiAnJyB9fVwiXHJcbiAgICAgICAgICAgICAgKm5nSWY9XCJmaWVsZD8uZXh0cmE/LmN1c3RvbUNsYXNzXCI+XHJcbiAgICAgICAgICAgICAge3sgZHluYW1pY0Zvcm0uZ2V0KGZpZWxkLm5hbWUgKyAnX25hbWUnKT8udmFsdWUgPyBkeW5hbWljRm9ybS5nZXQoZmllbGQubmFtZSArICdfbmFtZScpPy52YWx1ZSA6IChmaWVsZD8uZXh0cmE/LmN1c3RvbVRleHQgfHwgJ05vIGZpbGUgY2hvc2VuJykgfX1cclxuICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgICAgICAgPCEtLSBCdXR0b24gLS0+XHJcbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiZmllbGQudHlwZSA9PT0gJ2J1dHRvbidcIj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInt7IGZpZWxkLmNsYXNzIH19XCIgKGNsaWNrKT1cImV2ZW50Q2FsbCgkZXZlbnQsICdjbGljaycsIGZpZWxkPy5zZWN0aW9uLCBmaWVsZC5uYW1lLCBmaWVsZD8uZXh0cmE/LnN1Ym1pdCB8fCBmYWxzZSlcIj5cclxuICAgICAgICAgICAgICB7eyBmaWVsZC5sYWJlbCB9fVxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgICAgICAgPCEtLSBWYWxpZGF0aW9uIGVycm9yIG1lc3NhZ2VzIC0tPlxyXG4gICAgICAgICAgPGRpdiAqbmdJZj1cIiFjb250cm9sc1tmaWVsZC5uYW1lXT8udmFsaWQgJiYgY29udHJvbHNbZmllbGQubmFtZV0/LnRvdWNoZWQgJiYgZmllbGQ/LmV4dHJhPy52YWxpZGF0aW9uTWVzc2FnZXNcIlxyXG4gICAgICAgICAgICBjbGFzcz1cInZhbGlkYXRpb24tZXJyb3JcIj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LWRhbmdlclwiICpuZ0lmPVwiY29udHJvbHNbZmllbGQubmFtZV0/LmVycm9ycz8uWydyZXF1aXJlZCddXCI+XHJcbiAgICAgICAgICAgICAge3sgZmllbGQ/LmV4dHJhPy52YWxpZGF0aW9uTWVzc2FnZXM/LnJlcXVpcmVkIH19XHJcbiAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LWRhbmdlclwiICpuZ0lmPVwiY29udHJvbHNbZmllbGQubmFtZV0/LmVycm9ycz8uWydwYXR0ZXJuJ11cIj5cclxuICAgICAgICAgICAgICB7eyBmaWVsZD8uZXh0cmE/LnZhbGlkYXRpb25NZXNzYWdlcz8ucGF0dGVybiB9fVxyXG4gICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cclxuICAgIDwvZGl2PlxyXG4gIDwvZm9ybT5cclxuICAiXX0=